(function() {

  tinymce.create('tinymce.plugins.ExtraText', {
    init : function(ed, url) {
      var t = this;

      t.editor = ed;

      ed.addCommand('mceExtraText', function() {
        if ($(ed.getBody()).find("div.extradivider").length == 0)
          ed.execCommand('mceInsertContent', false, "<div class='extradivider'></div>");
        else
          alert("Du kan bara lägga till en platshållare för extratexter");
      });

      ed.addButton('extratext', {
        title : 'Infoga platshållare för extratexter',
        image: url + '/img/extratext.gif',
        cmd : 'mceExtraText'
      });
    },

    getInfo : function() {
      return {
        longname : 'Infoga extratext',
        author : 'Magnus Ehlde',
        authorurl : 'http://www.040.se',
        version : "1.0"
      };
    },

  });

  // Register plugin
  tinymce.PluginManager.add('extratext', tinymce.plugins.ExtraText);
})();